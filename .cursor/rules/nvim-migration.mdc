---
description: Neovim migration plan and architecture - auto-attached when working with nvim config
globs:
  - "config.home.symlink/nvim/**/*"
  - "**/nvim/**/*.lua"
alwaysApply: false
---

# Neovim Configuration Guide

When working with Neovim configuration files, always reference the comprehensive migration plan located at:

@config.home.symlink/nvim/MIGRATION_PLAN.md

## Key Architecture Principles

- **Environment Detection**: Detect Cursor IDE vs Terminal for conditional loading
- **Modular Structure**: 
  - `core/` - Universal (all environments): env, options, keymaps, lazy bootstrap
  - `plugins/` - Plugin specs with conditional loading
  - `config/` - Advanced config (LSP, autocmds) - terminal only
  - `utils/` - Custom utility functions
- **Conditional Plugin Loading**: 
  - GUI (Cursor/VSCode): Minimal - only text editing plugins
  - Terminal: Full-featured - all plugins
- **Pure Lua**: No Vimscript, use Lua exclusively
- **Implementation Order**: Foundation → Essential Plugins → Intelligence → Polish → Advanced

## Current Implementation Status

Check the todos in MIGRATION_PLAN.md for current progress and next steps.

## Progress Tracking Protocol

**CRITICAL**: When implementing items from MIGRATION_PLAN.md:

1. **Update todos frontmatter** in MIGRATION_PLAN.md as you complete tasks:
   - Change `status: pending` → `status: in_progress` when starting
   - Change `status: in_progress` → `status: completed` when done
   
2. **Commit progress updates** separately from implementation:
   - Implementation commit: `feat(nvim): <what was implemented>`
   - Progress commit: `docs(nvim): update MIGRATION_PLAN progress tracking`

3. **Before ending session**: Always update MIGRATION_PLAN.md todos so next agent knows what's done

The todos in the YAML frontmatter are the single source of truth for tracking progress across agent sessions.
