#!/usr/bin/env node
const port = Number(process.argv[2])
const query = port ? `#localhost\\\\\\\\:${port} .actions .action` : '#node-frontend'
function openDevtool(query, count = 0) {
    if(count < 5) {
        const openDevtoolButton = document.querySelector(`${query}`)
        if(!openDevtoolButton) {
            setTimeout(() => openDevtoolButton(query, count + 1), 500)
            return
        }
        openDevtoolButton.click()
    }
}
const osascript = `
            osascript << 'END'
            tell application "Google Chrome"
                activate
                open location "chrome://inspect"
                delay 1
                execute front window's active tab javascript "(${openDevtool.toString()})('${query}')"
            end tell
            END
           `
require('child_process').execSync(osascript)
