# -----------------------------------------------------------
# Terminal & color
# -----------------------------------------------------------
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm*:Tc"
set -as terminal-overrides ",xterm-kitty:Tc"

# Pass through modifier keys and escape sequences (Kitty graphics, etc.)
set -s extended-keys on
set -as terminal-features ',xterm*:extkeys'
set -as terminal-features ',xterm-kitty:extkeys'
set -g allow-passthrough on

# -----------------------------------------------------------
# Mouse
# -----------------------------------------------------------
set -g mouse on

# -----------------------------------------------------------
# Copy & paste (macOS)
# -----------------------------------------------------------
# Use vi keys in copy mode
setw -g mode-keys vi

# Mouse drag copies to system clipboard automatically
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# vi-style: v to select, y to yank to system clipboard
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# OSC 52 clipboard (lets apps inside tmux set clipboard directly)
set -s set-clipboard on

# -----------------------------------------------------------
# Pane navigation (matches Neovim Ctrl+hjkl)
# -----------------------------------------------------------
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# Close pane (matches Neovim Ctrl+q)
bind -n C-q kill-pane

# Zoom/unzoom pane (prefix-less, works even when app captures Ctrl+b)
bind -n C-z resize-pane -Z

# -----------------------------------------------------------
# Appearance
# -----------------------------------------------------------
# Dim inactive panes (hooks force per-pane repaint on focus change)
set -g window-style 'bg=colour236'
set -g window-active-style 'bg=black'
set-hook -g pane-focus-in "select-pane -P 'bg=black'"
set-hook -g pane-focus-out "select-pane -P 'bg=colour236'"

# No status bar (Kitty tabs are enough)
set -g status off

# -----------------------------------------------------------
# Behavior
# -----------------------------------------------------------
# No delay after pressing Escape
set -s escape-time 0

# Longer scrollback
set -g history-limit 50000

# Destroy session when last shell exits
set -g destroy-unattached on

# Start window/pane numbering at 1 (matches keyboard layout)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on
